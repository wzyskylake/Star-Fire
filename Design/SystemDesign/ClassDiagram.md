# 1. 传感器、主机、控制器类图
## 1.1 Sensor 类
功能:主要负责传感器部分运行,可以被主机设备接入并设置设备号
### Sensor Interface 接口
#### setDeviceID(long)
功能:设置传感器设备的 ID,方便明确数据采集对象  
输入:long 型设备 ID 
#### getParameter()
功能:生成包含环境参数信息的比特流,并向外部设备发送  
输出:规定格式的比特流
#### getDeviceID()
功能:为外部设备提供设备 ID  
输出:long 型设备 ID 
#### measureParameter()
功能:立即从串口获取传感器测量得到的环境参数,存入对象缓存区中  
输出:True--测量成功;False--测量失败
#### restartDevice()
功能:重启传感器设备,并清除相应缓冲区  
输出:True--重启成功;False--重启失败
## 1.2 Mainframe 类
功能:主机设备通过内部定时器执行循环操作,即从所连接的传感器设备读取参数信息(比特流),解析并向服务器发送得到数据;同时接收服务器的控制命令,通过连接的控制器来执行控制操作
#### calculagraph()
功能:作为内部计时器,定时激活相应内部操作
### Mainfarme Interface 接口
#### setDeviceID(long)
功能:设置传感器设备的 ID,在新增设备并入网络后由服务器设置设备信息  
输入:long 型设备 ID 
#### getDeviceID()
功能:为服务器设备提供设备 ID
输出:long 型设备 ID 
#### getData()
功能:为服务器提供获取主机设备记录数据的接口  
输出:JSON 格式包含了主机设备信息以及设备信息的文件
#### addSensor()
功能:在总线上新增传感器设备后,执行此函数,完成记录连接设置等操作
输出:True--添加成功;False--添加失败
#### restartDevice()
功能:功能:重启传感器设备,但不清除连接设备的记录信息
## 1.3Controller 类
功能:控制所连接控制设备,检测设备的运行状态,为主机设备执行控制命令
#### setOrder()
功能:服务器向控制器发送控制指令来控制环境
输入:包含控制信息的 JSON 文件
输出:返回接收确认信息
#### getInformation()
功能:服务器获取控制器运行信息#### 
输出:包含运行信息的 JSON 文件
#### emergencyStop()
功能:在发生紧急情况时停止一切控制器件的操作
### 1.3.1 Fan 类
#### speedUP()
功能:增加风扇转速
#### speedDown()
功能:降低风扇转速
### 1.3.2 Light 类
#### turnON()
功能:开启照明
#### turnOFF()
功能:关闭照明
### 1.3.3 Pump 类
#### srartWork()
功能:开启水泵
#### stopWork()
功能:关闭水泵
### 1.3.4 Air Condition 类
#### srartWork()
功能:开启空调
#### stopWork()
功能:关闭空调

# 2. 服务器类图
## 2.1 Receiver
功能:监听端口,接收并处理发来的信息,并交付后层处理
#### receiveFile()
功能:接收发来的信息信息  
输出:接收到的文件或比特流  
#### cleanBuffer()
功能:清空缓冲区  
输入:缓冲区地址  
输出:True--清空成功;False--清空失败  
#### analyzeFile()
功能:解析发来的文件或比特流,将内容转化为可被服务器处理的符合数据库格式的记录  
输入:文件的地址或记录的头指针  
输出:固定格式的记录
#### sendData()
功能:将解析好的记录转送给数据库以及处理程序  
输入:数据库地址,处理程序入口  
输出:True--发送成功;False--发送失败
## 2.2 Decision Maker
#### analyzeData()
功能:分析收到的环境数据,读取出地块标识,环境参数,时间戳等多种信息  
输入:固定格式的记录
#### invokeRules()
功能:从数据库读取对应地块的处理规则  
输入:地块的标识信息  
输出:可以用于决策的规则
#### makeDecision()
功能:通过预设的规则以及实际参数信息判断此地块设备需要进行的操作或保持的状态  
输入:环境参数,时间信息,处理规则  
输出:决策结果
#### sendDecision()
功能:将处理程序得到的决策结果发送给数据库保存,以及命令发送程序处理  
输入:数据库地址,发送程序入口
## 2.3 Order Maker
功能:将处理程序得到的决策以及用户确定的猝发命令发送给连接的设备
#### analyzeDecision()
功能:分析决策命令,提取出命令与目标字段  
输入:决策命令
#### buildCommunication()
功能:与设备建立通讯连接,以便发送数据  
输出:True--连接建立成功;False--连接建立失败
#### makePackage()
功能:将分析好的命令以互联网规定的格式封装起来  
输出:规定格式的数据包
#### sendPackage()
功能:将封装好的数据包发送给对应的设备
## 2.4 Database
功能:存储一段时间内的环境参数以及决策命令,以便调取或分析研究
#### inserField()
功能:在相应数据表中插入新的记录  
输入:参数信息或是决策命令  
输出:True--插入成功;False--插入失败
#### deleteField()
功能:在相应数据表中删除相应记录  
输入:需要删除的记录的主键信息
输出:True--删除成功;False--删除失败
#### createTable()
功能:新建一张对应于实际设备的参数或命令表
输入:设备的唯一标识信息
输出:True--建立成功;False--建立失败
#### deleteTable()
功能:删除一张对应于实际设备的参数或命令表
输入:设备的唯一标识信息
输出:True--删除成功;False--删除失败
## 2.5 Web View
功能:负责生成视图化的浏览器页面
#### makeNewPage()
功能:新建页面  
输入:页面配置文件
#### getData()
功能:获取页面需要显示的数据  
输入:显示数据文件
#### drawPage()
功能:根据页面配置文件以及实时的数据渲染出显示的页面  
输出:页面文件
#### sendInput()
功能:将用户在页面中输入的数据信息传递给中间层  
输入:用户键入
输出:键入信息
## 2.6 Middle Ware
功能:负责为页面提供页面需要的信息,接收用户输入的信息,处理从数据库读取和接收端发来的信息,发送要被存储和执行的信息
#### processData()
功能:处理数据库和接收端发来的信息  
输入:数据库的记录或是接收端发来的信息  
输出:可被页面读取的数据
#### processInput()
功能:处理用户输入  
输入:界面发来的键入信息  
输出:可被程序理解的命令或规范化的数据库记录
#### sendDecision()
功能:将处理好的用户输入发送给相应的程序或数据库  
输入:目标程序入口
#### createRule()
功能:为目标地块设备创建新的判断规则,
输入:用户输入  
输出:规则记录条目
#### deleteRule()
功能:删除目标地块设备的判断规则
输入:用户输入